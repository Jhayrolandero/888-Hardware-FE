@if(!offlineService.isOnline()) {
	<div class="flex flex-col justify-center items-center h-full">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class=" size-12 text-mainGreen">
            <path stroke-linecap="round" stroke-linejoin="round" d="m3 3 8.735 8.735m0 0a.374.374 0 1 1 .53.53m-.53-.53.53.53m0 0L21 21M14.652 9.348a3.75 3.75 0 0 1 0 5.304m2.121-7.425a6.75 6.75 0 0 1 0 9.546m2.121-11.667c3.808 3.807 3.808 9.98 0 13.788m-9.546-4.242a3.733 3.733 0 0 1-1.06-2.122m-1.061 4.243a6.75 6.75 0 0 1-1.625-6.929m-.496 9.05c-3.068-3.067-3.664-7.67-1.79-11.334M12 12h.008v.008H12V12Z" />
        </svg>
        <p
        class="text-center text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2"
        >
            You are offline!
        </p>
    </div>
} @else {
<div class="tablet:p-5 grid gap-3 ">
	<!-- Title Segment -->
	<div class=" bg-white w-full rounded-[10px] flex flex-row justify-between items-center px-5 border shadow-md">
		<p class="text-mainGreen font-DMSans font-bold text-[1.7rem]  tablet:text-[2.3rem] py-1">
			Supplier Transactions
		</p>
		<button
		(click)="exportSupplierTransaction()"
			class="flex gap-2 text-white font-medium bg-mainGreen border-[1px] rounded-[10px] px-4 py-2">
			Export All Transactions
			<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
				stroke="currentColor" class="size-6">
				<path stroke-linecap="round" stroke-linejoin="round"
					d="M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z" />
			</svg>
		</button>
	</div>

	<div class="flex flex-col laptop:flex-row gap-3">

		<div
			class="bg-mainGreen tablet:rounded-[10px] flex flex-row justify-between items-center px-3 py-2 tablet:px-5">
			<div class="flex flex-row gap-2 text-white items-center max-fit tablet:w-max">
				<input type="month" class="focus:outline-none bg-transparent text-white text-[0.8rem] tablet:text-[1rem] font-DMSans font-bold" #monthTrigger id="monthTrigger" (change)="filterSupplier('dateStart',$event)"/>
				<span>To</span>
				<input type="month" class="focus:outline-none bg-transparent text-white text-[0.8rem] tablet:text-[1rem] font-DMSans font-bold" #monthTrigger id="monthTrigger" (change)="filterSupplier('dateEnd',$event)" />
			</div>
		</div>


		<div class="bg-white border shadow-md flex-1 rounded-[10px] flex flex-col tablet:flex-row justify-center items-center p-2 gap-3">

			<div class="flex flex-row w-full flex-1">
				<div class="rounded-[5px] flex-1 flex items-center p-2 px-5 border-2 border-mainGray border-solid">
					<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path
							d="M19.6 21L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16C7.68333 16 6.146 15.3707 4.888 14.112C3.63 12.8533 3.00067 11.316 3 9.5C2.99933 7.684 3.62867 6.14667 4.888 4.888C6.14733 3.62933 7.68467 3 9.5 3C11.3153 3 12.853 3.62933 14.113 4.888C15.373 6.14667 16.002 7.684 16 9.5C16 10.2333 15.8833 10.925 15.65 11.575C15.4167 12.225 15.1 12.8 14.7 13.3L21 19.6L19.6 21ZM9.5 14C10.75 14 11.8127 13.5627 12.688 12.688C13.5633 11.8133 14.0007 10.7507 14 9.5C13.9993 8.24933 13.562 7.187 12.688 6.313C11.814 5.439 10.7513 5.00133 9.5 5C8.24867 4.99867 7.18633 5.43633 6.313 6.313C5.43967 7.18967 5.002 8.252 5 9.5C4.998 10.748 5.43567 11.8107 6.313 12.688C7.19033 13.5653 8.25267 14.0027 9.5 14Z"
							fill="black" fill-opacity="0.7" />
					</svg>
	
					<input [(ngModel)]="searchParam" (ngModelChange)="onChangeSearch()" type="text"
						class="outline-none ml-3 font-DMSans font-medium text-black opacity-70 text-[0.9rem] tablet:text-[1.1rem] flex-1"
						placeholder="Search Inventory">
				</div>
				<div
					class="cursor-pointer rounded-[10px] p-2 tablet:px-4 flex flex-col items-center justify-center">
					<div class="flex flex-col items-center" mat-button [matMenuTriggerFor]="menu">
						@if(searchFilter === ''){
						<svg class="select-none" width="25" height="24" viewBox="0 0 25 24" fill="none"
							xmlns="http://www.w3.org/2000/svg">
							<path
								d="M14.5 12V19.88C14.54 20.18 14.44 20.5 14.21 20.71C14.1175 20.8027 14.0076 20.8762 13.8866 20.9264C13.7657 20.9766 13.636 21.0024 13.505 21.0024C13.374 21.0024 13.2444 20.9766 13.1234 20.9264C13.0024 20.8762 12.8925 20.8027 12.8 20.71L10.79 18.7C10.681 18.5933 10.5981 18.4629 10.5478 18.319C10.4975 18.175 10.4812 18.0213 10.5 17.87V12H10.47L4.71001 4.62C4.54762 4.41153 4.47434 4.14726 4.5062 3.88493C4.53805 3.6226 4.67244 3.38355 4.88001 3.22C5.07001 3.08 5.28001 3 5.50001 3H19.5C19.72 3 19.93 3.08 20.12 3.22C20.3276 3.38355 20.462 3.6226 20.4938 3.88493C20.5257 4.14726 20.4524 4.41153 20.29 4.62L14.53 12H14.5Z"
								fill="#2A5C66" fill-opacity="1" />
						</svg>
						<p class="text-[0.55rem]">Filter Search</p>
						}
						@else {
						<svg class="select-none mr-2" width="25" height="24" viewBox="0 0 25 24" fill="none"
							xmlns="http://www.w3.org/2000/svg">
							<path
								d="M14.5 12V19.88C14.54 20.18 14.44 20.5 14.21 20.71C14.1175 20.8027 14.0076 20.8762 13.8866 20.9264C13.7657 20.9766 13.636 21.0024 13.505 21.0024C13.374 21.0024 13.2444 20.9766 13.1234 20.9264C13.0024 20.8762 12.8925 20.8027 12.8 20.71L10.79 18.7C10.681 18.5933 10.5981 18.4629 10.5478 18.319C10.4975 18.175 10.4812 18.0213 10.5 17.87V12H10.47L4.71001 4.62C4.54762 4.41153 4.47434 4.14726 4.5062 3.88493C4.53805 3.6226 4.67244 3.38355 4.88001 3.22C5.07001 3.08 5.28001 3 5.50001 3H19.5C19.72 3 19.93 3.08 20.12 3.22C20.3276 3.38355 20.462 3.6226 20.4938 3.88493C20.5257 4.14726 20.4524 4.41153 20.29 4.62L14.53 12H14.5Z"
								fill="#2A5C66" fill-opacity="1" />
						</svg>
						<p class="text-[0.55rem]">{{searchFilter}}</p>
						}
	
					</div>
	
	
					<mat-menu #menu="matMenu" class="custom-style">
						<div class="font-DMSans">
							<button mat-menu-item (click)="searchFilter = 'Supplier Name'">Supplier Name</button>
							<button mat-menu-item (click)="searchFilter = 'DR No.'">Receipt No.</button>
							<button mat-menu-item (click)="searchFilter = 'Method of Payment'">Method of Payment</button>
						</div>
					</mat-menu>
				</div>
	
			</div>
			@if(selectedPaidList.length > 0){
			<div (click)="paidDialog()"
				class="w-full tablet:w-auto cursor-pointer bg-mainGreen text-white rounded-[5px] p-2 px-4 flex flex-row items-center justify-center">
				Mark Selected as Paid
			</div>
			}
			@else {
			<div
				class="w-full tablet:w-auto opacity-50 cursor-pointer bg-mainGreen text-white rounded-[5px] p-2 px-4 flex flex-row items-center justify-center">
				Mark Selected as Paid
			</div>
			}
		</div>

	</div>


	<mat-tab-group (selectedTabChange)="processPartiallyPaidGroup($event)">
		<mat-tab label="Paid" > 
			<div class="gap-3 bg-white w-full rounded-[10px] flex flex-col" style="height: calc(100vh - 250px);">
				<div>
					<div
						class="hidden tablet:flex tablet:flex-row items-center bg-mainGreen rounded-tl-[10px] rounded-tr-[10px] text-[0.8rem] mobileS:text-[1rem] mb-2 p-2">
						<div class="w-[40px]"></div>
						<p class="text-white w-[25%]">Supplier Name</p>
						<p class="text-white w-[25%]">DR No.</p>
						<p class="text-white w-[25%]">Total Price</p>
						<p class="text-white w-[25%]">Date Paid</p>
					</div>
		
					<div *ngIf="!hasPaid" class="w-full flex flex-row justify-center">
						<p class="text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
							No Records Found!
						</p>
					</div>
		
					<ng-container *ngFor="let trans of displayTransactions; let i = index">
						<div (click)="dropdownChecker(trans)" *ngIf="trans.is_paid"
							class="p-[7px] border-t-2 hidden tablet:flex flex-col justify-center overflow-y-auto"
							[ngClass]="((i % 2 === 0) || (i == 0)) ? 'bg-[#f8f8f8]' : 'bg-white'">

							<div class="flex flex-row items-center text-[0.9rem]">

								@if(trans.is_paid){
									<div (click)="dropdownChecker(trans)" class="w-[40px] h-[40px]"></div>
								} @else if(!trans.is_paid){
									<mat-checkbox (click)="dropdownChecker(trans)" [disabled]="sameClientChecker(trans)" id="{{i}}"
										(change)="checkboxUpdate($event, trans)">
									</mat-checkbox>
								}

								<div class="hidden tablet:block w-[25%]">
									<p>{{ trans.supplier_name }}</p>
								</div>


								<div class="hidden tablet:block w-[25%]">
									<p>{{trans.dr_number}}</p>
								</div>
								<div class="hidden tablet:block w-[25%]">
									<p>₱{{ trans.total_cost }}</p>
								</div>
								<div class="hidden tablet:block w-[25%]">
									<p>
										@if(trans.paid_date_unix!.includes(",")){
											₱{{ unixToDate(+(trans.paid_date_unix!.split(",")[trans.paid_date_unix!.split(",").length-1])) }}
										}
										@else{
											₱{{ unixToDate(+(trans.paid_date_unix!)) }}
										}
										</p>
								</div>
	
								<div
									class="cursor-pointer  text-white rounded-full p-1 px-3 duration-300 hover:duration-300 hover:scale-[103%]">
									@if(!trans.is_dropdown){
									<svg width="15" height="15" viewBox="0 0 9 15" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" clip-rule="evenodd"
											d="M8.54384 6.43412C8.83593 6.71448 9 7.09452 9 7.49076C9 7.887 8.83593 8.26704 8.54384 8.5474L2.66243 14.1875C2.36982 14.4678 1.97301 14.6253 1.5593 14.6252C1.14559 14.6251 0.748855 14.4675 0.456384 14.187C0.163913 13.9065 -0.000341602 13.5261 -0.000244097 13.1295C-0.000146592 12.7329 0.164294 12.3526 0.456903 12.0722L5.23607 7.49076L0.456903 2.90933C0.172635 2.62745 0.0152302 2.24982 0.0185899 1.85777C0.0219496 1.46572 0.185805 1.09062 0.474866 0.813254C0.763926 0.535892 1.15506 0.378462 1.56403 0.374871C1.973 0.371281 2.36708 0.521818 2.66139 0.794059L8.54488 6.43312L8.54384 6.43412Z"
											fill="#2A5C66" />
									</svg>
									} @else {
									<svg width="15" height="15" viewBox="0 0 15 9" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" clip-rule="evenodd"
											d="M8.56608 8.54396C8.28572 8.83605 7.90568 9.00012 7.50943 9.00012C7.11319 9.00012 6.73315 8.83605 6.4528 8.54396L0.812735 2.66255C0.532364 2.36994 0.374907 1.97314 0.375 1.55942C0.375094 1.14571 0.53273 0.748977 0.813233 0.456506C1.09374 0.164035 1.47413 -0.000219532 1.87072 -0.000122027C2.26732 -2.45218e-05 2.64764 0.164416 2.92801 0.457025L7.50943 5.23619L12.0909 0.457025C12.3727 0.172757 12.7504 0.0153523 13.1424 0.018712C13.5345 0.0220717 13.9096 0.185927 14.1869 0.474988C14.4643 0.764048 14.6217 1.15518 14.6253 1.56415C14.6289 1.97312 14.4784 2.3672 14.2061 2.66151L8.56707 8.545L8.56608 8.54396Z"
											fill="#2A5C66" />
									</svg>
									}
								</div>
							</div>

							

							@if(trans.is_dropdown){
                    
								<div class="mat-elevation-z8 overflow-y-scroll no-scrollbar" style="height: calc(100vh - 350px);">

									<div *ngIf="supplierProducts.length < 1" class="w-full flex flex-row justify-center">
										<p class="text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
											No Records Found!
										</p>
									</div>
						
									<table *ngIf="supplierProducts.length > 0" mat-table [dataSource]="dataSource"  class="">
								
									<!--- Note that these columns can be defined in any order.
											The actual rendered columns are set as a property on the row definition" -->
						
										<!-- Name Column -->
									<ng-container matColumnDef="incoming_quantity">
										<th mat-header-cell *matHeaderCellDef> Quantity </th>
										<td mat-cell *matCellDef="let element">
											{{element.incoming_quantity}}
										</td>
									</ng-container>
									
									<!-- Name Column -->
									<ng-container matColumnDef="inventory_name">
										<th mat-header-cell *matHeaderCellDef> Inventory Name </th>
										<td mat-cell *matCellDef="let element">
											@if(element.has_variant){
												{{element.product_name}} - {{element.variant_name}}
											}
											@else{
												{{element.product_name}}
											}
										</td>
									</ng-container>
									
									<!-- Weight Column -->
									<ng-container matColumnDef="stock_price">
										<th mat-header-cell *matHeaderCellDef> Stock Price </th>
										<td mat-cell *matCellDef="let element">
											@if(element.has_variant){
												{{element.variant_unit_price}}
											}
											@else{
												{{element.stock_unit_price}}
											}
										</td>
									</ng-container>
						
									<ng-container matColumnDef="unit_price">
										<th mat-header-cell *matHeaderCellDef> Sell Price </th>
										<td mat-cell *matCellDef="let element">
											@if(element.has_variant){
												{{element.variant_unit_price}}
											}
											@else{
												{{element.sell_price}}
											}
										</td>
									</ng-container>
									
									<!-- Symbol Column -->
									<ng-container matColumnDef="discount">
										<th mat-header-cell *matHeaderCellDef> Discount </th>
										<td mat-cell *matCellDef="let element">
											@if(element.discount !== null && element.discount !== '0' && element.discount !== ''){
												{{parseDiscountDisplay(element.discount)}}
											}
											@else{
												No Discount
											}
										</td>
									</ng-container>
									
									<tr mat-header-row *matHeaderRowDef="['incoming_quantity', 'inventory_name', 'stock_price', 'unit_price', 'discount']"></tr>
									<tr mat-row *matRowDef="let row; columns: ['incoming_quantity', 'inventory_name', 'stock_price', 'unit_price', 'discount'];"></tr>
									</table>
									
									<mat-paginator [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
								</div>



								<!-- <app-table-component (click)="trans.is_dropdown = !trans.is_dropdown" [data]="transactionProductParse(trans)" [columns]="[
								{'Quantity': 'quantity'}, 
								{'Inventory Name': ['product_name', 'variant_name']}, 
								{'Stock Price': ['default_stock_price','variant_stock_price']}, 
								{'Sell Price': ['default_sell_price', 'variant_sell_price']}, 
								{'Discount': ['discount', 'variant_stock_discount']}, 
								{'Total': 'final_total'}]"></app-table-component> -->
								<!-- <app-transaction-table [data]="transactionProductParse(trans)" class="p-5"></app-transaction-table> -->
							}
						</div>
					</ng-container>
				</div>
			</div>
		</mat-tab>
		<mat-tab label="Partial"> 
			<div class="gap-3  w-full  flex flex-col">
				<div *ngIf="!hasPartial" class="w-full flex flex-row justify-center">
					<!-- <mat-spinner class="mat-progress-spinner" [diameter]="50"></mat-spinner> -->
					<p class="text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
						No Records Found!
					</p>
				</div>
					@if(displayTransactions.length > 0) {
						<div *ngFor="let part of partialTransaction | keyvalue" class="bg-white rounded-[10px] p-3 m-3 border shadow-md">
							<div class="w-full flex  flex-row justify-between mb-3 items-start">
								<div class="flex flex-col">
									<p class="font-semibold text-[1.5rem] text-mainGreen">{{part.value[0].supplier_name}}</p>
									<p class="font-semibold text-[1rem]"> Total Payment: {{calculateTotalPayable(part.value)}}</p>
									<p *ngFor="let i = index; let paid of part.value[0]?.paid_amount?.split(',')" class="opacity-60 font-medium italic text-[1rem]">
										@if(part.value.length > 0) {
											Paid &#x20B1;{{ paid }} at {{ part.value && part.value[0] && part.value[0].unix_dates ? part.value[0].unix_dates[i] : 'No date available' }} : {{ part.value && part.value[0] && part.value[0].method_of_payment ? part.value[0].method_of_payment.split(",")[i] : 'No payment type available' }}
										}
									</p>
								</div>
								<div (click)="selectedPaidList = part.value; paidDialog()" class=" cursor-pointer bg-mainGreen border-2 border-solid text-white rounded-[10px] p-2 px-4">
									Continue Grouped Payment
								</div>
							</div>

							<div
								class="hidden tablet:flex tablet:flex-row items-center bg-mainGreen rounded-tl-[10px] rounded-tr-[10px] text-[0.8rem] mobileS:text-[1rem] mb-2 p-2">
								<p class="text-white flex-1">DR No.</p>
								<p class="text-white flex-1">Total Unit Price</p>
								<p class="text-white flex-1">Date Delivered</p>
								<p class="text-white w-[20%]">Action</p>
							</div>
				

				
							<div *ngIf="isLoading" class="w-full flex flex-row justify-center">
								<mat-spinner class="mat-progress-spinner" [diameter]="50"></mat-spinner>
							</div>	
							<ng-container *ngFor="let trans of part.value; let i = index">
								<div (click)="dropdownChecker(trans)" *ngIf="(!trans.is_paid)"
									class="p-[7px] border-t-2 hidden tablet:flex flex-col justify-center overflow-y-auto"
									[ngClass]="((i % 2 === 0) || (i == 0)) ? 'bg-[#f8f8f8]' : 'bg-white'">
		
									<div class="flex flex-row items-center text-[0.9rem]">
	
										<!-- <div (click)="trans.is_dropdown = !trans.is_dropdown" class="w-[40px] h-[40px]"></div> -->
	
										<!-- <div class="hidden tablet:block w-[20%]">
											<p>{{ trans.client_name }}</p>
										</div> -->
										<!-- <ng-container *ngIf="currentlyEditing === trans; else viewMode">
											<form (click)="trans.is_dropdown = !trans.is_dropdown" [formGroup]="editForm" class="flex-1 flex flex-row space-x-2">
												<div class="hidden tablet:block flex-1">
													<input type="text" formControlName="dr_number"
														class="w-full p-1 border rounded custom-input" placeholder="{{trans.dr_number}}" />
												</div>
											</form>
											<div class="hidden tablet:block flex-1">
												<p>₱{{ trans.subtotal_price }}</p>
											</div>
											<div class="hidden tablet:block v">
												<p>{{ trans.transaction_date }}</p>
											</div>
										</ng-container> -->

										<div class="hidden tablet:block flex-1">
											<p>{{trans.dr_number}}</p>
										</div>
										<div class="hidden tablet:block flex-1">
											<p>₱{{ trans.total_cost }}</p>
										</div>
										<div class="hidden tablet:block flex-1">
											<p>{{trans.date}}</p>
										</div>

				
										<div class="flex gap-3 w-[20%] mr-2">
			
											<div (click)="dropdownChecker(trans)" class="flex flex-1 space-x-3">
												<!-- @if(this.currentlyEditing !== trans) { -->
												<div
													class="w-full h-[25px] cursor-pointer hover:scale-[102%] hover:duration-300 duration-300 bg-mainGreen rounded-[7px] inline-flex justify-center items-center">
													<svg width="20" height="20" viewBox="0 0 27 27" fill="none"
														xmlns="http://www.w3.org/2000/svg">
														<path
															d="M4.24609 11.8906V21.5469C4.24609 22.0804 4.45804 22.5921 4.83531 22.9694C5.21258 23.3466 5.72427 23.5586 6.25781 23.5586H20.7422C21.2757 23.5586 21.7874 23.3466 22.1647 22.9694C22.542 22.5921 22.7539 22.0804 22.7539 21.5469V11.8906C22.7539 11.3571 22.542 10.8454 22.1647 10.4681C21.7874 10.0909 21.2757 9.87891 20.7422 9.87891H18.7305C18.4103 9.87891 18.1033 10.0061 17.877 10.2324C17.6506 10.4588 17.5234 10.7658 17.5234 11.0859C17.5234 11.4061 17.6506 11.7131 17.877 11.9394C18.1033 12.1658 18.4103 12.293 18.7305 12.293H20.3398V21.1445H6.66016V12.293H8.26953C8.58966 12.293 8.89667 12.1658 9.12303 11.9394C9.34939 11.7131 9.47656 11.4061 9.47656 11.0859C9.47656 10.7658 9.34939 10.4588 9.12303 10.2324C8.89667 10.0061 8.58966 9.87891 8.26953 9.87891H6.25781C5.72427 9.87891 5.21258 10.0909 4.83531 10.4681C4.45804 10.8454 4.24609 11.3571 4.24609 11.8906ZM16.6695 7.91647L14.707 5.95605V14.3047C14.707 14.6248 14.5799 14.9318 14.3535 15.1582C14.1271 15.3845 13.8201 15.5117 13.5 15.5117C13.1799 15.5117 12.8729 15.3845 12.6465 15.1582C12.4201 14.9318 12.293 14.6248 12.293 14.3047V5.95605L10.3305 7.91949C10.2183 8.03177 10.085 8.12083 9.93827 8.1816C9.79157 8.24236 9.63434 8.27364 9.47556 8.27364C9.31677 8.27364 9.15954 8.24236 9.01284 8.1816C8.86615 8.12083 8.73285 8.03177 8.62058 7.91949C8.5083 7.80721 8.41924 7.67392 8.35847 7.52722C8.29771 7.38053 8.26643 7.2233 8.26643 7.06451C8.26643 6.90573 8.29771 6.7485 8.35847 6.6018C8.41924 6.4551 8.5083 6.32181 8.62058 6.20953L12.644 2.18609C12.7562 2.07357 12.8894 1.98428 13.0361 1.92336C13.1828 1.86244 13.3401 1.83108 13.499 1.83108C13.6579 1.83108 13.8152 1.86244 13.9619 1.92336C14.1086 1.98428 14.2418 2.07357 14.354 2.18609L18.3774 6.20953C18.4897 6.32181 18.5788 6.4551 18.6395 6.6018C18.7003 6.7485 18.7316 6.90573 18.7316 7.06451C18.7316 7.38519 18.6042 7.69274 18.3774 7.91949C18.1507 8.14625 17.8431 8.27364 17.5224 8.27364C17.2018 8.27364 16.8942 8.14625 16.6675 7.91949L16.6695 7.91647Z"
															fill="white" />
													</svg>
												</div>
											</div>
											<div
												class="cursor-pointer  text-white rounded-full p-1 px-3 duration-300 hover:duration-300 hover:scale-[103%]">
												@if(!trans.is_dropdown){
												<svg width="15" height="15" viewBox="0 0 9 15" fill="none" xmlns="http://www.w3.org/2000/svg">
													<path fill-rule="evenodd" clip-rule="evenodd"
														d="M8.54384 6.43412C8.83593 6.71448 9 7.09452 9 7.49076C9 7.887 8.83593 8.26704 8.54384 8.5474L2.66243 14.1875C2.36982 14.4678 1.97301 14.6253 1.5593 14.6252C1.14559 14.6251 0.748855 14.4675 0.456384 14.187C0.163913 13.9065 -0.000341602 13.5261 -0.000244097 13.1295C-0.000146592 12.7329 0.164294 12.3526 0.456903 12.0722L5.23607 7.49076L0.456903 2.90933C0.172635 2.62745 0.0152302 2.24982 0.0185899 1.85777C0.0219496 1.46572 0.185805 1.09062 0.474866 0.813254C0.763926 0.535892 1.15506 0.378462 1.56403 0.374871C1.973 0.371281 2.36708 0.521818 2.66139 0.794059L8.54488 6.43312L8.54384 6.43412Z"
														fill="#2A5C66" />
												</svg>
												} @else {
												<svg width="15" height="15" viewBox="0 0 15 9" fill="none" xmlns="http://www.w3.org/2000/svg">
													<path fill-rule="evenodd" clip-rule="evenodd"
														d="M8.56608 8.54396C8.28572 8.83605 7.90568 9.00012 7.50943 9.00012C7.11319 9.00012 6.73315 8.83605 6.4528 8.54396L0.812735 2.66255C0.532364 2.36994 0.374907 1.97314 0.375 1.55942C0.375094 1.14571 0.53273 0.748977 0.813233 0.456506C1.09374 0.164035 1.47413 -0.000219532 1.87072 -0.000122027C2.26732 -2.45218e-05 2.64764 0.164416 2.92801 0.457025L7.50943 5.23619L12.0909 0.457025C12.3727 0.172757 12.7504 0.0153523 13.1424 0.018712C13.5345 0.0220717 13.9096 0.185927 14.1869 0.474988C14.4643 0.764048 14.6217 1.15518 14.6253 1.56415C14.6289 1.97312 14.4784 2.3672 14.2061 2.66151L8.56707 8.545L8.56608 8.54396Z"
														fill="#2A5C66" />
												</svg>
												}
											</div>
										</div>
									</div>
		
									
		
									@if(trans.is_dropdown){
										<div class="mat-elevation-z8 overflow-y-scroll no-scrollbar" style="">
											<!-- <div class="w-full flex flex-row justify-center">
												<mat-spinner class="mat-progress-spinner" [diameter]="50"></mat-spinner>
											</div>
											<div *ngIf="supplierProducts.length < 1" class="w-full flex flex-row justify-center">
												<p class="text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
													No Records Found!
												</p>
											</div> -->
								
											<table *ngIf="supplierProducts.length > 0" mat-table [dataSource]="dataSource"  class="">
										
											<!--- Note that these columns can be defined in any order.
													The actual rendered columns are set as a property on the row definition" -->
								
												<!-- Name Column -->
											<ng-container matColumnDef="incoming_quantity">
												<th mat-header-cell *matHeaderCellDef> Quantity </th>
												<td mat-cell *matCellDef="let element">
													{{element.incoming_quantity}}
												</td>
											</ng-container>
											
											<!-- Name Column -->
											<ng-container matColumnDef="inventory_name">
												<th mat-header-cell *matHeaderCellDef> Inventory Name </th>
												<td mat-cell *matCellDef="let element">
													@if(element.has_variant){
														{{element.product_name}} - {{element.variant_name}}
													}
													@else{
														{{element.product_name}}
													}
												</td>
											</ng-container>
											
											<!-- Weight Column -->
											<ng-container matColumnDef="stock_price">
												<th mat-header-cell *matHeaderCellDef> Stock Price </th>
												<td mat-cell *matCellDef="let element">
													@if(element.has_variant){
														{{element.variant_unit_price}}
													}
													@else{
														{{element.stock_unit_price}}
													}
												</td>
											</ng-container>
								
											<ng-container matColumnDef="unit_price">
												<th mat-header-cell *matHeaderCellDef> Sell Price </th>
												<td mat-cell *matCellDef="let element">
													@if(element.has_variant){
														{{element.variant_unit_price}}
													}
													@else{
														{{element.sell_price}}
													}
												</td>
											</ng-container>
											
											<!-- Symbol Column -->
											<ng-container matColumnDef="discount">
												<th mat-header-cell *matHeaderCellDef> Discount </th>
												<td mat-cell *matCellDef="let element">
													@if(element.discount !== null && element.discount !== '0' && element.discount !== ''){
														{{parseDiscountDisplay(element.discount)}}
													}
													@else{
														No Discount
													}
												</td>
											</ng-container>
											
											<tr mat-header-row *matHeaderRowDef="['incoming_quantity', 'inventory_name', 'stock_price', 'unit_price', 'discount']"></tr>
											<tr mat-row *matRowDef="let row; columns: ['incoming_quantity', 'inventory_name', 'stock_price', 'unit_price', 'discount'];"></tr>
											</table>
											
											<mat-paginator [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
										</div>
										<!-- <app-table-component (click)="trans.is_dropdown = !trans.is_dropdown" [data]="transactionProductParse(trans)" [columns]="[
										{'Quantity': 'quantity'}, 
										{'Inventory Name': ['product_name', 'variant_name']}, 
										{'Stock Price': ['default_stock_price','variant_stock_price']}, 
										{'Sell Price': ['default_sell_price', 'variant_sell_price']}, 
										{'Discount': ['discount', 'variant_stock_discount']}, 
										{'Total': 'final_total'}]"></app-table-component> -->
									}
								</div>
							</ng-container>

						</div>


					} 
					@else if (displayTransactions.length < 1 && !isLoading) { 
						<p class="text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2 text-center">
							No Records Found!
						</p>
		
					}
			</div>
		</mat-tab>
		<mat-tab label="Unpaid"> 
			<div class="gap-3 bg-white w-full rounded-[10px] flex flex-col" style="height: calc(100vh - 250px);">
				<div>
					<div
						class="hidden tablet:flex tablet:flex-row items-center bg-mainGreen rounded-tl-[10px] rounded-tr-[10px] text-[0.8rem] mobileS:text-[1rem] mb-2 p-2">
						<div class="w-[40px]"></div>
						<p class="text-white w-[25%]">Client Name</p>
						<p class="text-white w-[25%]">DR No.</p>
						<p class="text-white w-[25%]">Total Price</p>
						<p class="text-white w-[25%]">Date Delivered</p>
					</div>
		
					<div *ngIf="!hasUnpaid" class="w-full flex flex-row justify-center">
						<p class="text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
							No Records Found!
						</p>
					</div>
		
					<ng-container *ngFor="let trans of displayTransactions; let i = index">
						<div (click)="dropdownChecker(trans)" *ngIf="!trans.is_paid && !trans.paid_amount"
							class="p-[7px] border-t-2 hidden tablet:flex flex-col justify-center overflow-y-auto"
							[ngClass]="((i % 2 === 0) || (i == 0)) ? 'bg-[#f8f8f8]' : 'bg-white'">

							<div class="flex flex-row items-center text-[0.9rem]">

								@if(trans.is_paid){
									<div (click)="dropdownChecker(trans)" class="w-[40px] h-[40px]"></div>
								} @else if(!trans.is_paid){
									<mat-checkbox (click)="dropdownChecker(trans)" [disabled]="sameClientChecker(trans)" id="{{i}}"
										(change)="checkboxUpdate($event, trans)">
									</mat-checkbox>
								}

								<div class="hidden tablet:block w-[20%]">
									<p>{{ trans.supplier_name }}</p>
								</div>
								<!-- <ng-container *ngIf="currentlyEditing === trans; else viewMode">
									<form (click)="trans.is_dropdown = !trans.is_dropdown" [formGroup]="editForm" class="w-[25%] flex flex-row space-x-2">
										<div class="hidden tablet:block w-[35%]">
											<input type="text" formControlName="dr_number"
												class="w-full p-1 border rounded custom-input" placeholder="{{trans.dr_number}}" />
										</div>
									</form>
									<div class="hidden tablet:block w-[15%]">
										<p>₱{{ trans.subtotal_price }}</p>
									</div>
									<div class="hidden tablet:block w-[15%]">
										<p>{{ trans.transaction_date }}</p>
									</div>
								</ng-container> -->
								<ng-template #viewMode>
									<div class="hidden tablet:block w-[10%]">
										<p>{{trans.dr_number}}</p>
									</div>
									<div class="hidden tablet:block w-[15%]">
										<p>₱{{ trans.total_cost }}</p>
									</div>
								</ng-template>
		
								<div class="flex gap-3 flex-1 mr-2">
									<div class="flex flex-1">
										@if(trans.is_paid){
											<div class="flex-1 flex">
												<p>{{ trans.paid_date }}</p>
											</div>
										} 
										@else if(!trans.is_paid){
											@if(selectedPaidList.length < 1){ 
												<div class="hidden tablet:flex flex-1">
													<div (click)="paidDialog(trans); dropdownChecker(trans)"
														class="w-full py-2 text-[0.9rem] h-[25px] text-white cursor-pointer hover:scale-[102%] hover:duration-300 duration-300 bg-mainGreen rounded-[7px] inline-flex justify-center items-center">
														<!-- {{trans.payment_left}} -->
														@if(trans.payment_left != trans.total_cost && trans.paid_amount){
															Continue Payment
														}
														@else {
															Pay Delivery
														}
													</div>
												</div>
											} 
									
											@else {
												<div class="hidden tablet:flex flex-1">
													<div
														class="w-full opacity-50 h-[25px] cursor-pointer hover:scale-[102%] hover:duration-300 duration-300 bg-mainGreen rounded-[7px] inline-flex justify-center items-center">
														<svg width="25" height="25" viewBox="0 0 25 25" fill="none"
															xmlns="http://www.w3.org/2000/svg">
															<path
																d="M10.0501 18.5L4.3501 12.8L5.7751 11.375L10.0501 15.65L19.2251 6.475L20.6501 7.9L10.0501 18.5Z"
																fill="white" />
														</svg>
													</div>
												</div>
											} 
										}
									</div>
		
									<div (click)="dropdownChecker(trans)" class="flex flex-1 space-x-3">
										<!-- @if(this.currentlyEditing !== trans) { -->
										<div
											class="w-full h-[25px] cursor-pointer hover:scale-[102%] hover:duration-300 duration-300 bg-mainGreen rounded-[7px] inline-flex justify-center items-center">
											<svg width="20" height="20" viewBox="0 0 27 27" fill="none"
												xmlns="http://www.w3.org/2000/svg">
												<path
													d="M4.24609 11.8906V21.5469C4.24609 22.0804 4.45804 22.5921 4.83531 22.9694C5.21258 23.3466 5.72427 23.5586 6.25781 23.5586H20.7422C21.2757 23.5586 21.7874 23.3466 22.1647 22.9694C22.542 22.5921 22.7539 22.0804 22.7539 21.5469V11.8906C22.7539 11.3571 22.542 10.8454 22.1647 10.4681C21.7874 10.0909 21.2757 9.87891 20.7422 9.87891H18.7305C18.4103 9.87891 18.1033 10.0061 17.877 10.2324C17.6506 10.4588 17.5234 10.7658 17.5234 11.0859C17.5234 11.4061 17.6506 11.7131 17.877 11.9394C18.1033 12.1658 18.4103 12.293 18.7305 12.293H20.3398V21.1445H6.66016V12.293H8.26953C8.58966 12.293 8.89667 12.1658 9.12303 11.9394C9.34939 11.7131 9.47656 11.4061 9.47656 11.0859C9.47656 10.7658 9.34939 10.4588 9.12303 10.2324C8.89667 10.0061 8.58966 9.87891 8.26953 9.87891H6.25781C5.72427 9.87891 5.21258 10.0909 4.83531 10.4681C4.45804 10.8454 4.24609 11.3571 4.24609 11.8906ZM16.6695 7.91647L14.707 5.95605V14.3047C14.707 14.6248 14.5799 14.9318 14.3535 15.1582C14.1271 15.3845 13.8201 15.5117 13.5 15.5117C13.1799 15.5117 12.8729 15.3845 12.6465 15.1582C12.4201 14.9318 12.293 14.6248 12.293 14.3047V5.95605L10.3305 7.91949C10.2183 8.03177 10.085 8.12083 9.93827 8.1816C9.79157 8.24236 9.63434 8.27364 9.47556 8.27364C9.31677 8.27364 9.15954 8.24236 9.01284 8.1816C8.86615 8.12083 8.73285 8.03177 8.62058 7.91949C8.5083 7.80721 8.41924 7.67392 8.35847 7.52722C8.29771 7.38053 8.26643 7.2233 8.26643 7.06451C8.26643 6.90573 8.29771 6.7485 8.35847 6.6018C8.41924 6.4551 8.5083 6.32181 8.62058 6.20953L12.644 2.18609C12.7562 2.07357 12.8894 1.98428 13.0361 1.92336C13.1828 1.86244 13.3401 1.83108 13.499 1.83108C13.6579 1.83108 13.8152 1.86244 13.9619 1.92336C14.1086 1.98428 14.2418 2.07357 14.354 2.18609L18.3774 6.20953C18.4897 6.32181 18.5788 6.4551 18.6395 6.6018C18.7003 6.7485 18.7316 6.90573 18.7316 7.06451C18.7316 7.38519 18.6042 7.69274 18.3774 7.91949C18.1507 8.14625 17.8431 8.27364 17.5224 8.27364C17.2018 8.27364 16.8942 8.14625 16.6675 7.91949L16.6695 7.91647Z"
													fill="white" />
											</svg>
										</div>
		
										<!-- <div (click)="editRow(trans)"
											class="w-full h-[25px] cursor-pointer hover:scale-[102%] hover:duration-300 duration-300 bg-mainGreen rounded-[7px] inline-flex justify-center items-center">
											<svg width="20" height="18" viewBox="0 0 19 19" fill="none"
												xmlns="http://www.w3.org/2000/svg">
												<path
													d="M4 5H3C2.46957 5 1.96086 5.21071 1.58579 5.58579C1.21071 5.96086 1 6.46957 1 7V16C1 16.5304 1.21071 17.0391 1.58579 17.4142C1.96086 17.7893 2.46957 18 3 18H12C12.5304 18 13.0391 17.7893 13.4142 17.4142C13.7893 17.0391 14 16.5304 14 16V15"
													stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
												<path
													d="M13 3L16 6M17.385 4.585C17.7788 4.19115 18.0001 3.65698 18.0001 3.1C18.0001 2.54302 17.7788 2.00885 17.385 1.615C16.9912 1.22115 16.457 0.999893 15.9 0.999893C15.343 0.999893 14.8088 1.22115 14.415 1.615L6 10V13H9L17.385 4.585Z"
													stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
											</svg>
										</div> -->
										<!-- } @else {
										<div (click)="cancelChanges()"
											class="text-white w-full h-[25px] cursor-pointer hover:scale-[102%] hover:duration-300 duration-300 bg-mainRed rounded-[7px] inline-flex justify-center items-center">

											Cancel
										</div>
		
										<div (click)="submitChanges()"
											class="text-white w-full h-[25px] cursor-pointer hover:scale-[102%] hover:duration-300 duration-300 bg-mainGreen rounded-[7px] inline-flex justify-center items-center">

											Submit
										</div>
										} -->
									</div>
								</div>
								<div
									class="cursor-pointer  text-white rounded-full p-1 px-3 duration-300 hover:duration-300 hover:scale-[103%]">
									@if(!trans.is_dropdown){
									<svg width="15" height="15" viewBox="0 0 9 15" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" clip-rule="evenodd"
											d="M8.54384 6.43412C8.83593 6.71448 9 7.09452 9 7.49076C9 7.887 8.83593 8.26704 8.54384 8.5474L2.66243 14.1875C2.36982 14.4678 1.97301 14.6253 1.5593 14.6252C1.14559 14.6251 0.748855 14.4675 0.456384 14.187C0.163913 13.9065 -0.000341602 13.5261 -0.000244097 13.1295C-0.000146592 12.7329 0.164294 12.3526 0.456903 12.0722L5.23607 7.49076L0.456903 2.90933C0.172635 2.62745 0.0152302 2.24982 0.0185899 1.85777C0.0219496 1.46572 0.185805 1.09062 0.474866 0.813254C0.763926 0.535892 1.15506 0.378462 1.56403 0.374871C1.973 0.371281 2.36708 0.521818 2.66139 0.794059L8.54488 6.43312L8.54384 6.43412Z"
											fill="#2A5C66" />
									</svg>
									} @else {
									<svg width="15" height="15" viewBox="0 0 15 9" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" clip-rule="evenodd"
											d="M8.56608 8.54396C8.28572 8.83605 7.90568 9.00012 7.50943 9.00012C7.11319 9.00012 6.73315 8.83605 6.4528 8.54396L0.812735 2.66255C0.532364 2.36994 0.374907 1.97314 0.375 1.55942C0.375094 1.14571 0.53273 0.748977 0.813233 0.456506C1.09374 0.164035 1.47413 -0.000219532 1.87072 -0.000122027C2.26732 -2.45218e-05 2.64764 0.164416 2.92801 0.457025L7.50943 5.23619L12.0909 0.457025C12.3727 0.172757 12.7504 0.0153523 13.1424 0.018712C13.5345 0.0220717 13.9096 0.185927 14.1869 0.474988C14.4643 0.764048 14.6217 1.15518 14.6253 1.56415C14.6289 1.97312 14.4784 2.3672 14.2061 2.66151L8.56707 8.545L8.56608 8.54396Z"
											fill="#2A5C66" />
									</svg>
									}
								</div>
							</div>

							

							@if(trans.is_dropdown){
                    
								<div class="mat-elevation-z8 overflow-y-scroll no-scrollbar" style="height: calc(100vh - 350px);">
									<div class="w-full flex flex-row justify-center">
										<mat-spinner class="mat-progress-spinner" [diameter]="50"></mat-spinner>
									</div>
									<div *ngIf="supplierProducts.length < 1" class="w-full flex flex-row justify-center">
										<!-- <mat-spinner class="mat-progress-spinner" [diameter]="50"></mat-spinner> -->
										<p class="text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
											No Records Found!
										</p>
									</div>
						
									<table *ngIf="supplierProducts.length > 0" mat-table [dataSource]="dataSource"  class="">
								
									<!--- Note that these columns can be defined in any order.
											The actual rendered columns are set as a property on the row definition" -->
						
										<!-- Name Column -->
									<ng-container matColumnDef="incoming_quantity">
										<th mat-header-cell *matHeaderCellDef> Quantity </th>
										<td mat-cell *matCellDef="let element">
											{{element.incoming_quantity}}
										</td>
									</ng-container>
									
									<!-- Name Column -->
									<ng-container matColumnDef="inventory_name">
										<th mat-header-cell *matHeaderCellDef> Inventory Name </th>
										<td mat-cell *matCellDef="let element">
											@if(element.has_variant){
												{{element.product_name}} - {{element.variant_name}}
											}
											@else{
												{{element.product_name}}
											}
										</td>
									</ng-container>
									
									<!-- Weight Column -->
									<ng-container matColumnDef="stock_price">
										<th mat-header-cell *matHeaderCellDef> Stock Price </th>
										<td mat-cell *matCellDef="let element">
											@if(element.has_variant){
												{{element.variant_unit_price}}
											}
											@else{
												{{element.stock_unit_price}}
											}
										</td>
									</ng-container>
						
									<ng-container matColumnDef="unit_price">
										<th mat-header-cell *matHeaderCellDef> Sell Price </th>
										<td mat-cell *matCellDef="let element">
											@if(element.has_variant){
												{{element.variant_unit_price}}
											}
											@else{
												{{element.sell_price}}
											}
										</td>
									</ng-container>
									
									<!-- Symbol Column -->
									<ng-container matColumnDef="discount">
										<th mat-header-cell *matHeaderCellDef> Discount </th>
										<td mat-cell *matCellDef="let element">
											@if(element.discount !== null && element.discount !== '0' && element.discount !== ''){
												{{parseDiscountDisplay(element.discount)}}
											}
											@else{
												No Discount
											}
										</td>
									</ng-container>
									
									<tr mat-header-row *matHeaderRowDef="['incoming_quantity', 'inventory_name', 'stock_price', 'unit_price', 'discount']"></tr>
									<tr mat-row *matRowDef="let row; columns: ['incoming_quantity', 'inventory_name', 'stock_price', 'unit_price', 'discount'];"></tr>
									</table>
									
									<mat-paginator [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
								</div>



								<!-- <app-table-component (click)="trans.is_dropdown = !trans.is_dropdown" [data]="transactionProductParse(trans)" [columns]="[
								{'Quantity': 'quantity'}, 
								{'Inventory Name': ['product_name', 'variant_name']}, 
								{'Stock Price': ['default_stock_price','variant_stock_price']}, 
								{'Sell Price': ['default_sell_price', 'variant_sell_price']}, 
								{'Discount': ['discount', 'variant_stock_discount']}, 
								{'Total': 'final_total'}]"></app-table-component> -->
								<!-- <app-transaction-table [data]="transactionProductParse(trans)" class="p-5"></app-transaction-table> -->
							}
						</div>
					</ng-container>
				</div>
			</div>
		</mat-tab>
	</mat-tab-group>

</div>
}