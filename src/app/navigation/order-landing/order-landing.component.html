@if(!offlineService.isOnline()) {
    <div class="flex flex-col justify-center items-center h-full">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class=" size-12 text-mainGreen">
            <path stroke-linecap="round" stroke-linejoin="round" d="m3 3 8.735 8.735m0 0a.374.374 0 1 1 .53.53m-.53-.53.53.53m0 0L21 21M14.652 9.348a3.75 3.75 0 0 1 0 5.304m2.121-7.425a6.75 6.75 0 0 1 0 9.546m2.121-11.667c3.808 3.807 3.808 9.98 0 13.788m-9.546-4.242a3.733 3.733 0 0 1-1.06-2.122m-1.061 4.243a6.75 6.75 0 0 1-1.625-6.929m-.496 9.05c-3.068-3.067-3.664-7.67-1.79-11.334M12 12h.008v.008H12V12Z" />
        </svg>
        <p
        class="text-center text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2"
        >
            You are offline!
        </p>
    </div>
} @else {
@if(!switchInfo) {
    <div class="text-[#2A5C66] flex flex-col gap-4 w-full h-screen tablet:p-5">
        <div class=" bg-white border shadow-md w-full rounded-[10px] flex flex-row justify-center tablet:justify-between items-center px-5">
            <p class=" text-mainGreen font-DMSans font-bold text-[1.7rem]  tablet:text-[2.5rem] py-2">
                Manage Orders
            </p>
        </div>

        <div class="bg-white flex flex-col  rounded-[10px] gap-2 px-6 py-4 border shadow-md">
            <h4>Manage Orders</h4>
            <hr class="h-[2px] bg-[#2A5C66] border-0 ">
            <div class="text-white flex flex-col tablet:flex-row gap-4">
                <div class="flex flex-col w-full h-full">
                    <div class="duration-300 hover:duration-300 hover:scale-[102%] bg-[#2A5C66] rounded-[5px] p-4 cursor-pointer" (click)="goTo('create-order')">
                        <div class="flex items-center gap-2">
                            <span>
                                <svg class="w-[32px] aspect-square" width="23" height="20" viewBox="0 0 24 24" fill="#ffffff" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 14V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H10V5H5V19H19V14H21Z" fill="#ffffff"/>
                                    <path d="M21 7H17V3H15V7H11V9H15V13H17V9H21V7Z" fill="ffffff"/>
                                </svg>
                            </span>
                            <p class="text-[1.25rem] tablet:text-[1.5rem] font-medium">
                                New Order
                            </p>
                        </div>
                        <p class="text-[0.8rem] tablet:text-[1rem] text-[#ffffff]">Create a new order for a customer.</p>
                    </div>
                </div>

                <div class="flex flex-col w-full h-full">
                    <div class="duration-300 hover:duration-300 hover:scale-[102%] bg-[#2A5C66] rounded-[5px] p-4 cursor-pointer" (click)="goTo('manage-order-drafts')">
                        <div class="flex items-center gap-2">
                            <span>
                                <svg class="w-[32px] aspect-square" width="35" height="20" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19.9063 3.3125H4.59375C4.18764 3.3125 3.79816 3.47383 3.51099 3.76099C3.22383 4.04816 3.0625 4.43764 3.0625 4.84375V20.1563C3.0625 20.5624 3.22383 20.9518 3.51099 21.239C3.79816 21.5262 4.18764 21.6875 4.59375 21.6875H19.9063C20.3124 21.6875 20.7018 21.5262 20.989 21.239C21.2762 20.9518 21.4375 20.5624 21.4375 20.1563V4.84375C21.4375 4.43764 21.2762 4.04816 20.989 3.76099C20.7018 3.47383 20.3124 3.3125 19.9063 3.3125Z" stroke="#ffffff" stroke-opacity="0.7" stroke-width="2.04167" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M10.7188 16.0729L13.2709 18.1146L17.3542 13.0104M7.14587 7.90625H17.3542M7.14587 11.9896H11.2292" stroke="#ffffff" stroke-opacity="0.7" stroke-width="2.04167" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </span>
                            <p class="text-[1.25rem] tablet:text-[1.5rem] font-medium">
                            Order Drafts
                            </p>
                        </div>
                        <p class="text-[#ffffff] text-[0.8rem] tablet:text-[1rem]">Manage list of orders to be delivered.</p>
                    </div>
                </div>

                <div class="flex flex-col w-full">
                    <div class="duration-300 hover:duration-300 hover:scale-[102%] bg-[#2A5C66] rounded-[5px] p-4 cursor-pointer" (click)="goTo('manage-sales')">
                        <div class="flex items-center gap-2">
                            <span>
                                <svg class="w-[40px]" width="20" height="21" viewBox="0 0 40 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M38 12L20 2L2 12V32L20 42L38 32V12Z" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/>
                                    <path d="M19.9999 20V28M28.4705 16V28M11.5293 24V28" stroke="#ffffff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>

                            </span>
                            <p class="text-[1.25rem] tablet:text-[1.5rem] font-medium">
                            Sales
                            </p>
                        </div>
                        <p class="text-[#ffffff] text-[0.8rem] tablet:text-[1rem]">Manage completed transactions.</p>
                    </div>
                </div>

            </div>
        </div>
        <div class="bg-white flex flex-col rounded-[10px] gap-2 px-6 py-4 w-full border shadow-md">
            <h4>{{this.monthNow()}} Sales</h4>
            <hr class="h-[2px] bg-[#2A5C66] border-0 ">
        
            <div class="flex justify-start gap-4 mb-4">
                <button 
                    class="tab-button text-formText" 
                    [ngClass]="{'selectedButton': selectedTab === 'unpaid'}" 
                    (click)="selectedTab = 'unpaid'">
                    Unpaid
                </button>
                <button 
                    class="tab-button text-formText" 
                    [ngClass]="{'selectedButton': selectedTab === 'completed'}" 
                    (click)="selectedTab = 'completed'">
                    Completed
                </button>
            </div>
        
            <div *ngIf="selectedTab !== 'completed'" class="bg-mainGreen border rounded-[10px] rounded-b-[0px] text-[0.8rem] p-2 grid grid-cols-4">
                <div class="grid col-span-4 grid-cols-subgrid items-center text-white font-medium ">
                    <p>Customer Name</p>
                    <p>DR Number</p>
                    <p>Total Price</p>
                    <p>Date Delivered</p>
                    
                </div>
            </div>
        
            <div *ngIf="selectedTab === 'completed'" class="bg-mainGreen border rounded-[10px] rounded-b-[0px] text-[0.8rem] p-2 grid grid-cols-5 gap-2">
                <div class="grid col-span-full grid-cols-subgrid items-center text-white font-medium">
                    <p>Customer Name</p>
                    <p>DR Number</p>
                    <p>Total Price</p>
                    <p>Date Delivered</p>
                    <p>Date Paid</p>
                </div>

            </div>

            @if(filteredTransactions!.length < 1 && !isLoading && transactions!.length > 0) {
                <div  class="w-full flex flex-row justify-center">
                    <!-- <mat-spinner class="mat-progress-spinner" [diameter]="50"></mat-spinner> -->
                    <p class="text-center text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
                        No Records Found!
                    </p>
                </div>
            } @else if (isLoading) {
                <div  class="w-full flex flex-row justify-center">
                    <mat-spinner class="mat-progress-spinner" [diameter]="50"></mat-spinner>
                </div>
            } @else if (transactions!.length == 0) {
                <div  class="w-full flex flex-row justify-center">
                    <!-- <mat-spinner class="mat-progress-spinner" [diameter]="50"></mat-spinner> -->
                    <p class="text-center text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
                        No Orders Found!
                    </p>
                </div>
            } @else {

            <div class="overflow-y-scroll no-scrollbar" *ngIf="selectedTab === 'completed'">


                <div *ngFor="let pro of filteredTransactions; let i = index" [ngClass]="{'hidden': !pro.is_paid }" class="gap-2 font-DMSans border-t-2 grid grid-cols-5 w-full justify-center items-center" >
                    <div class="grid grid-cols-subgrid col-span-full items-center p-[7px]" [ngClass]="((i % 2 === 0) || (i == 0)) ? 'bg-[#f8f8f8]' : 'bg-white'">
                        <div class="flex flex-col">

                            <p class="text-[0.8rem] tablet:text-[1rem]">
                                {{ pro.client_name }}
                            </p>
                        </div>

                        <div class="flex flex-col">

                            <p class="text-[0.8rem] tablet:text-[1rem]">
                                {{ pro.dr_number}}
                            </p>
                        </div>

                        <div>
                            <p class="text-[0.8rem] tablet:text-[1rem]">
                                {{ pro.subtotal_price }}
                            </p>
                        </div>


                        <div class="flex flex-col">

                            <p class="text-[0.8rem] tablet:text-[1rem]">
                                {{ pro.transaction_date }}
                            </p>
                        </div>

                        <div class="flex flex-col">

                            <p class="text-[0.8rem] tablet:text-[1rem]">
                                {{ pro.paid_date }}
                            </p>
                        </div>
                        
                    </div>
                </div>
                <!-- } @else {
                    <div class="text-center text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
                        No Records Found!
                    </div>
                } -->

            </div>
            }
            
            <div class="overflow-y-scroll no-scrollbar" *ngIf="selectedTab === 'unpaid'">
                @if(hasUnpaidTransactions()){
                    <div *ngFor="let pro of filteredTransactions; let i = index" [ngClass]="{'hidden': pro.paid_amount !== null}" class="font-DMSans border-t-2 grid grid-cols-4 w-full justify-center items-center">
                        <div class="grid grid-cols-subgrid col-span-4 items-center p-[7px]" [ngClass]="((i % 2 === 0) || (i == 0)) ? 'bg-[#f8f8f8]' : 'bg-white'">
                            <div class="flex flex-col">
                                <p class="text-[0.8rem] tablet:text-[1rem]">
                                {{ pro.client_name }}
                                </p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-[0.8rem] tablet:text-[1rem]">
                                {{ pro.dr_number }}
                                </p>
                            </div>
                            <div>
                                <p class="text-[0.8rem] tablet:text-[1rem]">
                                â‚±{{ pro.subtotal_price }}
                                </p>
                            </div>
                            <div class="flex flex-col">
                                <p class="text-[0.8rem] tablet:text-[1rem]">
                                {{ pro.transaction_date }}
                                </p>
                            </div>
                        </div>
                    </div>
                    

                } @else {
                    <div class="text-center text-mainGreen font-DMSans font-bold text-[1.7rem] tablet:text-[2rem] py-2">
                        No Records Found!
                    </div>

                }


            </div>

        </div>
    </div>

}
}